{"version":3,"sources":["../src/load.js"],"names":["define","Ajax","EvokeFeed","blockdiv","document","querySelector","addEventListener","event","scrollTop","target","scrollHeight","offsetHeight","courseid","dataset","limitcomments","limitlikes","limitskilpoints","limitevocoins","limitbadges","hasmoreitems","request","call","methodname","args","done","response","data","JSON","parse","ulelement","items","forEach","element","listitem","createElement","className","href","url","innerHTML","icon","text","appendChild","bind"],"mappings":"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","sourcesContent":["/**\n * Add comment js logic.\n *\n * @package    mod_evokeportfolio\n * @copyright  2021 World Bank Group <https://worldbank.org>\n * @author     Willian Mano <willianmanoaraujo@gmail.com>\n */\n\n/* eslint-disable */\ndefine(['core/ajax'], function(Ajax) {\n    var EvokeFeed = function() {\n        var blockdiv = document.querySelector('.block-evokefeed');\n\n        blockdiv.addEventListener(\"scroll\", function(event) {\n            var scrollTop = event.target.scrollTop;\n            var scrollHeight = event.target.scrollHeight;\n            var offsetHeight = event.target.offsetHeight;\n\n            var courseid = event.target.dataset.courseid;\n            var limitcomments = event.target.dataset.limitcomments;\n            var limitlikes = event.target.dataset.limitlikes;\n            var limitskilpoints = event.target.dataset.limitskilpoints;\n            var limitevocoins = event.target.dataset.limitevocoins;\n            var limitbadges = event.target.dataset.limitbadges;\n            var hasmoreitems = event.target.dataset.hasmoreitems === 'true';\n\n            if(scrollTop + offsetHeight > scrollHeight - 5){\n                if (!hasmoreitems) {\n                    return;\n                }\n\n                var request = Ajax.call([{\n                    methodname: 'block_evokefeed_load',\n                    args: {\n                        courseid: courseid,\n                        limitcomments: limitcomments,\n                        limitlikes: limitlikes,\n                        limitskilpoints: limitskilpoints,\n                        limitevocoins: limitevocoins,\n                        limitbadges: limitbadges,\n                        hasmoreitems: hasmoreitems\n                    }\n                }]);\n\n                request[0].done(function(response) {\n                    var data = JSON.parse(response.data);\n\n                    event.target.dataset.limitcomments = data.limitcomments;\n                    event.target.dataset.limitlikes = data.limitlikes;\n                    event.target.dataset.limitskilpoints = data.limitskilpoints;\n                    event.target.dataset.limitevocoins = data.limitevocoins;\n                    event.target.dataset.limitbadges = data.limitbadges;\n                    event.target.dataset.hasmoreitems = data.hasmoreitems;\n\n                    var ulelement = document.querySelector('.block-evokefeed .list-group');\n\n                    data.items.forEach(function(element) {\n                        var listitem = document.createElement('a');\n                        listitem.className = 'list-group-item list-group-item-action fadein';\n                        listitem.href = element.url;\n                        listitem.innerHTML = '<i class=\"fa '+element.icon+'\"></i> ' + element.text;\n\n                        ulelement.appendChild(listitem);\n                    });\n                }.bind(this))\n            }\n        }, false);\n    };\n\n    return {\n        'init': function() {\n            return new EvokeFeed();\n        }\n    };\n});\n"],"file":"load.min.js"}
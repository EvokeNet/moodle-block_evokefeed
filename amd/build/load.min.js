define ("block_evokefeed/load",["core/ajax"],function(a){var b=function(){var a=document.querySelector(".block-evokefeed");this.loaditems();a.addEventListener("scroll",function(a){var b=a.target.scrollTop,c=a.target.scrollHeight,d=a.target.offsetHeight,e="true"===a.target.dataset.hasmoreitems;if(b+d>c-5){if(!e){return}if(!this.wait){this.loaditems()}}}.bind(this),!1)};b.prototype.wait=!1;b.prototype.loaditems=function(){this.wait=!0;var b=document.querySelector(".block-evokefeed"),c=parseInt(b.dataset.courseid),d=parseInt(b.dataset.limitcomments),e=parseInt(b.dataset.limitlikes),f=parseInt(b.dataset.limitskilpoints),g=parseInt(b.dataset.limitevocoins),h=parseInt(b.dataset.limitbadges),i="true"===b.dataset.hasmoreitems,j=a.call([{methodname:"block_evokefeed_load",args:{courseid:c,limitcomments:d,limitlikes:e,limitskilpoints:f,limitevocoins:g,limitbadges:h,hasmoreitems:i}}]);j[0].done(function(a){var c=document.querySelector(".block_evokefeed .loading-placeholder");c.classList.add("hidden");var i=JSON.parse(a.data);b.dataset.limitcomments=d+1;b.dataset.limitlikes=e+1;b.dataset.limitskilpoints=f+1;b.dataset.limitevocoins=g+1;b.dataset.limitbadges=h+1;b.dataset.hasmoreitems=i.hasmoreitems;var j=document.querySelector(".block-evokefeed .list-group");i.items.forEach(function(a){var b=a.url;b=b.replace(/&amp;/g,"&");var c=document.createElement("a");c.className="list-group-item list-group-item-action fadein";c.href=b;c.innerHTML="<i class=\"fa "+a.icon+"\"></i> "+a.text;j.appendChild(c)});this.wait=!1}.bind(this))};return{init:function init(){return new b}}});
//# sourceMappingURL=load.min.js.map

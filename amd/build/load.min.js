define("block_evokefeed/load",["core/ajax"],(function(Ajax){var EvokeFeed=function(){var blockdiv=document.querySelector(".block-evokefeed");this.loaditems(),blockdiv.addEventListener("scroll",function(event){var scrollTop=event.target.scrollTop,scrollHeight=event.target.scrollHeight,offsetHeight=event.target.offsetHeight,hasmoreitems="true"===event.target.dataset.hasmoreitems;if(scrollTop+offsetHeight>scrollHeight-40){if(!hasmoreitems)return;this.wait||this.loaditems()}}.bind(this),!1)};return EvokeFeed.prototype.wait=!1,EvokeFeed.prototype.loaditems=function(){this.wait=!0;var containerelement=document.querySelector(".block-evokefeed"),courseid=parseInt(containerelement.dataset.courseid),limitcomments=parseInt(containerelement.dataset.limitcomments),limitlikes=parseInt(containerelement.dataset.limitlikes),limitskilpoints=parseInt(containerelement.dataset.limitskilpoints),limitevocoins=parseInt(containerelement.dataset.limitevocoins),limitbadges=parseInt(containerelement.dataset.limitbadges),hasmoreitems="true"===containerelement.dataset.hasmoreitems;Ajax.call([{methodname:"block_evokefeed_load",args:{courseid:courseid,limitcomments:limitcomments,limitlikes:limitlikes,limitskilpoints:limitskilpoints,limitevocoins:limitevocoins,limitbadges:limitbadges,hasmoreitems:hasmoreitems}}])[0].done(function(response){document.querySelector(".block_evokefeed .loading-placeholder").classList.add("hidden");var data=JSON.parse(response.data);containerelement.dataset.limitcomments=limitcomments+1,containerelement.dataset.limitlikes=limitlikes+1,containerelement.dataset.limitskilpoints=limitskilpoints+1,containerelement.dataset.limitevocoins=limitevocoins+1,containerelement.dataset.limitbadges=limitbadges+1,containerelement.dataset.hasmoreitems=data.hasmoreitems;var ulelement=document.querySelector(".block-evokefeed .list-group");data.items.forEach((function(element){var url=element.url;url=url.replace(/&amp;/g,"&");var listitem=document.createElement("a");listitem.className="list-group-item list-group-item-action flex-column align-items-start fadein",listitem.href=url,listitem.innerHTML='<div class="d-flex w-100 justify-content-between"><div class="images"><img src="'+element.userimg+'"><i class="fa '+element.icon+'"></i></div><p>'+element.userfullname+" <small>"+element.text+"</small></p></div>",ulelement.appendChild(listitem)})),this.wait=!1}.bind(this))},{init:function(){return new EvokeFeed}}}));

//# sourceMappingURL=load.min.js.map